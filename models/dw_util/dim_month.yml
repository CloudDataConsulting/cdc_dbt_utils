version: 2

models:
  - name: dim_month
    description: "Month dimension table containing one row per calendar month, derived from dim_date. Provides month-level aggregations and attributes for time series analysis at monthly granularity. Useful for financial reporting, trending, and month-over-month comparisons."
    columns:
    - name: month_key
      description: "Primary key as YYYYMM integer representing the year and month"
      data_tests:
        - unique
        - not_null
    
    # Month dates
    - name: month_begin_dt
      description: "First calendar date of the month"
    - name: month_end_dt
      description: "Last calendar date of the month"
    - name: month_begin_key
      description: "Date key (YYYYMMDD) of the month's first day"
    - name: month_end_key
      description: "Date key (YYYYMMDD) of the month's last day"
    
    # Month identifiers
    - name: month_nm
      description: "Full name of the month (January, February, March, etc.)"
    - name: month_abbr
      description: "Three-letter abbreviation of the month (Jan, Feb, Mar, etc.)"
    - name: month_num
      description: "Month number within the year (1-12)"
    - name: month_overall_num
      description: "Sequential month number since 1970-01-01, useful for month-over-month calculations"
    
    # Quarter context
    - name: quarter_num
      description: "Quarter number (1-4) containing this month"
    - name: quarter_nm
      description: "Quarter name (First, Second, Third, Fourth)"
    - name: month_in_quarter_num
      description: "Position of month within the quarter (1, 2, or 3)"
    
    # Year context
    - name: year_num
      description: "Calendar year as 4-digit integer"
    - name: yearmonth_txt
      description: "Year-month formatted as YYYY-MM string"
    
    # Month characteristics
    - name: days_in_month
      description: "Total number of days in the month (28-31)"
    - name: workdays_in_month
      description: "Number of weekdays (Monday-Friday) in the month"
    - name: weekends_in_month
      description: "Number of weekend days (Saturday-Sunday) in the month"
    - name: weeks_in_month
      description: "Number of weeks that overlap with this month"
    
    # Relative month indicators
    - name: same_month_last_year_key
      description: "Month key (YYYYMM) of the same month from the previous year"
    - name: same_month_last_year_begin_dt
      description: "First day of the same month from the previous year"
    - name: same_month_last_year_end_dt
      description: "Last day of the same month from the previous year"
    - name: prior_month_key
      description: "Month key (YYYYMM) of the previous month"
    - name: next_month_key
      description: "Month key (YYYYMM) of the following month"
    
    # Fiscal calendar support (when applicable)
    - name: fiscal_month_num
      description: "Month number in fiscal year (if fiscal calendar is configured)"
    - name: fiscal_year_num
      description: "Fiscal year (if fiscal calendar is configured)"
    - name: fiscal_yearmonth_num
      description: "Fiscal year-month combination as integer"
    
    # Retail calendar support
    - name: retail_period_num
      description: "Retail period number (1-12 in 4-5-4 or 4-4-5 calendar)"
    - name: retail_quarter_num
      description: "Retail quarter number (1-4)"
    - name: retail_year_num
      description: "Retail year (starts in February for NRF calendar)"
    - name: retail_period_nm
      description: "Retail period name"
    - name: retail_weeks_in_period
      description: "Number of weeks in this retail period (4 or 5)"
    
    # Metadata
    - name: create_user_id
      description: "User ID who created the record"
    - name: create_timestamp
      description: "Timestamp when the record was created"